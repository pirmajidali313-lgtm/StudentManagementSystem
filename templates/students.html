{% extends "base.html" %}
{% block title %}Students{% endblock %}
{% block content %}
<h2>Students List</h2>

{% if role == 'admin' %}
<a href="{{ url_for('add_student') }}" class="btn btn-success mb-3">Add Student</a>
{% endif %}

<div class="mb-3">
    <a href="{{ url_for('filter_students', status='all') }}" class="btn btn-secondary btn-sm">All</a>
    <a href="{{ url_for('filter_students', status='pass') }}" class="btn btn-success btn-sm">Pass</a>
    <a href="{{ url_for('filter_students', status='fail') }}" class="btn btn-danger btn-sm">Fail</a>
</div>

<table class="table table-striped table-bordered">
    <thead class="table-primary">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Marks</th>
            <th>Status</th>
            {% if role == 'admin' %}<th>Actions</th>{% endif %}
        </tr>
    </thead>
    <tbody>
        {% for student in students %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ student.name }}</td>
            <td>{{ student.marks }}</td>
            <td>
                {% if student.marks >= 300 %}
                    <span class="badge-pass">Pass</span>
                {% else %}
                    <span class="badge-fail">Fail</span>
                {% endif %}
            </td>
            {% if role == 'admin' %}
            <td>
                <a href="{{ url_for('edit_student', id=student.id) }}" class="btn btn-warning btn-sm">Edit</a>
                <a href="{{ url_for('delete_student', id=student.id) }}" class="btn btn-danger btn-sm">Delete</a>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}